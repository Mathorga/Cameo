[Unit]
Description=Cameo main service
After=multi-user.target network.target local-fs.target
Requires=NetworkManager.service

[Service]
Type=simple
User=pi
ExecStartPre=/bin/bash -c 'until rpicam-hello -t 1 >/dev/null 2>&1; do echo "Waiting for camera..."; sleep 2; done'
ExecStart=/home/pi/Cameo/start_server.sh
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target